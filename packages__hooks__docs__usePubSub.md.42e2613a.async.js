(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{HVN5:function(e,n,t){"use strict";t("0Owb"),t("q1tI"),t("mlvz")},OGKa:function(e,n,t){},"TN5+":function(e,n,t){"use strict";t("0Owb"),t("q1tI"),t("kERV")},f6G0:function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),s=t.n(a),u=t("dEAq"),r=(t("TN5+"),t("HVN5"),t("tP8H"),t("0zqC")),l=t("ZpkN"),c=t("hIlj").default["docs-usePubSub"].component;n["default"]=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"markdown"},s.a.createElement("h1",{id:"usepubsub---\u53d1\u5e03\u8ba2\u9605"},s.a.createElement(u["AnchorLink"],{to:"#usepubsub---\u53d1\u5e03\u8ba2\u9605","aria-hidden":"true"},s.a.createElement("span",{className:["icon","icon-link"]})),"usePubSub - \u53d1\u5e03\u8ba2\u9605"),s.a.createElement("p",null,"\u5728\u591a\u4e2a\u7ec4\u4ef6\u4e4b\u95f4\u8fdb\u884c\u4e8b\u4ef6\u901a\u77e5\u6709\u65f6\u4f1a\u8ba9\u4eba\u975e\u5e38\u5934\u75bc\uff0c\u501f\u52a9 PubSub \uff0c\u53ef\u4ee5\u8ba9\u8fd9\u4e00\u8fc7\u7a0b\u53d8\u5f97\u66f4\u52a0\u7b80\u5355\u3002"),s.a.createElement("p",null,"\u5728\u7ec4\u4ef6\u4e2d\u8c03\u7528 ",s.a.createElement("code",null,"useSubscribe")," \u53ef\u4ee5\u8ba2\u9605\u4e00\u4e2a\u4e8b\u4ef6(\u7ec4\u4ef6\u6d88\u8d39\u65f6\u4f1a\u81ea\u52a8\u53d6\u6d88\u8ba2\u9605)"),s.a.createElement("p",null,"\u901a\u8fc7",s.a.createElement("code",null,"PubSub.publish")," \u53ef\u4ee5\u53d1\u5e03\u4e00\u4e2a\u4e8b\u4ef6"),s.a.createElement("p",null,"\u5982\u679c\u6709\u9700\u8981\uff0c\u5728\u975e\u7ec4\u4ef6\u4e2d\u53ef\u4ee5\u4f7f\u7528",s.a.createElement("code",null,"PubSub.publish"),"\u3001",s.a.createElement("code",null,"PubSub.subscribe"),"\u6765\u8fdb\u884c\u8ba2\u9605\u3001\u53d1\u5e03(\u6ce8:\u5982\u679c\u81ea\u884c PubSub.subscribe \u8bf7\u6ce8\u610f\u8c03\u7528",s.a.createElement("code",null,"PubSub.unsubscribe"),"\u8fdb\u884c\u53d6\u6d88\u8ba2\u9605)"),s.a.createElement(l["a"],{code:"useSubscribe(event:string,(event:string,data:any)=>void);\n",lang:"js"}),s.a.createElement("blockquote",null,s.a.createElement("p",null,"\u5728\u7ec4\u4ef6\u591a\u6b21\u6e32\u67d3\u65f6\uff0c\u6bcf\u6b21\u6e32\u67d3\u8c03\u7528 ",s.a.createElement("code",null,"useSubscribe")," \u5f97\u5230\u7684\u8fd4\u56de\u503c\u4f1a\u4fdd\u6301\u4e0d\u53d8\uff0c\u4e0d\u4f1a\u91cd\u590d\u8ba2\u9605\u3002")),s.a.createElement(l["a"],{code:"PubSub.publish((event: string), (data: any));\n",lang:"js"}),s.a.createElement("p",null,"\u5bf9\u4e8e",s.a.createElement("strong",null,"\u5b50\u7ec4\u4ef6"),"\u901a\u77e5",s.a.createElement("strong",null,"\u7236\u7ec4\u4ef6"),"\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u4ecd\u7136\u63a8\u8350\u76f4\u63a5\u4f7f\u7528 ",s.a.createElement("code",null,"props")," \u4f20\u9012\u4e00\u4e2a ",s.a.createElement("code",null,"event")," \u51fd\u6570\u3002",s.a.createElement("code",null,"useSubscribe")," \u9002\u5408\u7684\u662f\u5728",s.a.createElement("strong",null,"\u8ddd\u79bb\u8f83\u8fdc"),"\u7684\u7ec4\u4ef6\u4e4b\u95f4\u8fdb\u884c\u4e8b\u4ef6\u901a\u77e5\uff0c\u6216\u662f\u5728",s.a.createElement("strong",null,"\u591a\u4e2a"),"\u7ec4\u4ef6\u4e4b\u95f4\u5171\u4eab\u4e8b\u4ef6\u901a\u77e5\u3002"),s.a.createElement("h2",{id:"\u4ee3\u7801\u6f14\u793a"},s.a.createElement(u["AnchorLink"],{to:"#\u4ee3\u7801\u6f14\u793a","aria-hidden":"true"},s.a.createElement("span",{className:["icon","icon-link"]})),"\u4ee3\u7801\u6f14\u793a"),s.a.createElement("h3",{id:"\u5b50\u7ec4\u4ef6\u53d1\u5e03\u7236\u7ec4\u4ef6\u8ba2\u9605"},s.a.createElement(u["AnchorLink"],{to:"#\u5b50\u7ec4\u4ef6\u53d1\u5e03\u7236\u7ec4\u4ef6\u8ba2\u9605","aria-hidden":"true"},s.a.createElement("span",{className:["icon","icon-link"]})),"\u5b50\u7ec4\u4ef6\u53d1\u5e03\u7236\u7ec4\u4ef6\u8ba2\u9605")),s.a.createElement(r["default"],{sources:{_:{jsx:"import React, { useState } from 'react';\nimport { Button, Input, Badge, Divider, Row, Col } from 'antd';\nimport { PubSub, useSubscribe } from '@wetrial/hooks';\n\nconst eventType = {\n  sendMessage: 'sendMessage',\n};\n\nfunction MessageList() {\n  const [messages, setMessages] = useState('');\n  useSubscribe(eventType.sendMessage, (_, data) => {\n    setMessages(data);\n  });\n  return (\n    <>\n      <Badge dot>\u6d88\u606f</Badge>\n      <Input.TextArea value={messages} />\n    </>\n  );\n}\n\nfunction Chat() {\n  const [message, setMessage] = useState('');\n\n  const sendMessage = e => {\n    e.preventDefault();\n    PubSub.publish(eventType.sendMessage, `${message}-${new Date().getTime()}`);\n    setMessage('');\n  };\n\n  return (\n    <Input.Group>\n      <Row>\n        <Col span={22}>\n          <Input\n            value={message}\n            onChange={e => {\n              setMessage(e.target.value);\n            }}\n            defaultValue=\"receive\"\n          />\n        </Col>\n        <Col span={2}>\n          <Button onClick={sendMessage} type=\"primary\">\n            \u53d1\u9001\n          </Button>\n        </Col>\n      </Row>\n    </Input.Group>\n  );\n}\n\nexport default () => (\n  <>\n    <MessageList />\n    <Divider />\n    <Chat />\n  </>\n);\n",tsx:"import React, { useState } from 'react';\nimport { Button, Input, Badge, Divider, Row, Col } from 'antd';\nimport { PubSub, useSubscribe } from '@wetrial/hooks';\n\nconst eventType = {\n  sendMessage: 'sendMessage',\n};\n\nfunction MessageList() {\n  const [messages, setMessages] = useState('');\n\n  useSubscribe(eventType.sendMessage, (_, data) => {\n    setMessages(data);\n  });\n\n  return (\n    <>\n      <Badge dot>\u6d88\u606f</Badge>\n      <Input.TextArea value={messages} />\n    </>\n  );\n}\n\nfunction Chat() {\n  const [message, setMessage] = useState('');\n\n  const sendMessage = (e) => {\n    e.preventDefault();\n    PubSub.publish(eventType.sendMessage, `${message}-${new Date().getTime()}`);\n    setMessage('');\n  };\n\n  return (\n    <Input.Group>\n      <Row>\n        <Col span={22}>\n          <Input\n            value={message}\n            onChange={(e) => {\n              setMessage(e.target.value);\n            }}\n            defaultValue=\"receive\"\n          />\n        </Col>\n        <Col span={2}>\n          <Button onClick={sendMessage} type=\"primary\">\n            \u53d1\u9001\n          </Button>\n        </Col>\n      </Row>\n    </Input.Group>\n  );\n}\n\nexport default () => {\n  return (\n    <>\n      <MessageList />\n      <Divider />\n      <Chat />\n    </>\n  );\n};\n"}},dependencies:{react:{version:"16.13.1"},"react-dom":{version:">=16.9.0"},antd:{version:"4.6.3",css:"antd/dist/antd.css"}},identifier:"docs-usePubSub"},s.a.createElement(c,null)),s.a.createElement("div",{className:"markdown"},s.a.createElement("h2",{id:"api"},s.a.createElement(u["AnchorLink"],{to:"#api","aria-hidden":"true"},s.a.createElement("span",{className:["icon","icon-link"]})),"API"),s.a.createElement(l["a"],{code:"import { usePublish, PubSub } from '@wetrial/hooks';\n\nuseSubscribe(event:string,(event:string,data:any)=>void);\nPubSub.publish(event:string,data:any);\n",lang:"typescript"}))))}},kERV:function(e,n,t){},mlvz:function(e,n,t){},tP8H:function(e,n,t){"use strict";t("tJVT"),t("q1tI"),t("OGKa")}}]);